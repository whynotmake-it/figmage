name: Integration Tests

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

on:
  pull_request_target: 
    types: [labeled]


jobs:
    integration_test:
        name: Run Integration Tests
        if: github.event.label.name == 'integration test'
        timeout-minutes: 10
        runs-on: ubuntu-latest
        steps:
        - name: 📚 Checkout
          uses: actions/checkout@v4

        - name: 🎯 Setup Dart
          uses: dart-lang/setup-dart@v1.6.5
          with:
            sdk: "stable"

        - name: Ⓜ️ Set up Melos
          uses: bluefireteam/melos-action@5a8367ec4b9942d712528c398ff3f996e03bc230
        
        - name: 🧪 Run Integration Tests
          run: dart test integration_test/generation_notifier_integration_test.dart